---
import Layout from '../layouts/Layout.astro';
import NavigationMenu from '../layouts/components/NavigationMenu';
import Footer from '../layouts/components/Footer';
import Analytics from '../components/shared/Analytics';
import ErrorTracking from '../components/shared/ErrorTracking';

const pageMetadata = {
    title: 'Página no encontrada | vBox Pro',
    description: 'Lo sentimos, la página que buscas no existe.',
    noindex: true
};
---

<Layout
    title={pageMetadata.title}
    description={pageMetadata.description}
    noindex={pageMetadata.noindex}
>
    <div class="flex flex-col min-h-screen">
        <NavigationMenu client:load />
        
        <main class="flex-grow container mx-auto px-4 py-12">
            <div class="max-w-2xl mx-auto text-center">
                <div class="mb-8">
                    <img 
                        src="/logoyr.svg" 
                        alt="vBox Pro Logo" 
                        class="w-24 h-24 mx-auto mb-4 opacity-50"
                    />
                    <h1 class="text-6xl font-bold text-orange-500 mb-4">404</h1>
                    <h2 class="text-2xl text-slate-300 mb-6">Página no encontrada</h2>
                    <p class="text-slate-400 mb-8">
                        Lo sentimos, la página que buscas no existe o ha sido movida.
                    </p>
                </div>

                <div class="bg-slate-800 p-8 rounded-lg mb-8">
                    <h3 class="text-lg font-semibold text-slate-300 mb-4">
                        ¿Buscabas alguna de nuestras calculadoras?
                    </h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
                        <a 
                            href="/honorarios" 
                            class="p-4 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors"
                        >
                            <h4 class="text-orange-500 font-medium mb-2">
                                Retención de Honorarios
                            </h4>
                            <p class="text-sm text-slate-400">
                                Calcula tu retención según tasas 2024-2028
                            </p>
                        </a>
                        <a 
                            href="/iva" 
                            class="p-4 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors"
                        >
                            <h4 class="text-orange-500 font-medium mb-2">
                                Calculadora IVA
                            </h4>
                            <p class="text-sm text-slate-400">
                                Calcula el IVA (19%) para tus facturas
                            </p>
                        </a>
                        <a 
                            href="/porcentajes" 
                            class="p-4 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors"
                        >
                            <h4 class="text-orange-500 font-medium mb-2">
                                Calculadora de Porcentajes
                            </h4>
                            <p class="text-sm text-slate-400">
                                Diferentes cálculos porcentuales
                            </p>
                        </a>
                        <a 
                            href="/indicadores" 
                            class="p-4 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors"
                        >
                            <h4 class="text-orange-500 font-medium mb-2">
                                Indicadores Económicos
                            </h4>
                            <p class="text-sm text-slate-400">
                                UF, Dólar, Euro y UTM
                            </p>
                        </a>
                    </div>
                </div>

                <a 
                    href="/" 
                    class="inline-flex items-center px-6 py-3 text-white bg-orange-700 rounded-lg hover:bg-orange-600 transition-colors"
                >
                    <svg 
                        class="w-5 h-5 mr-2" 
                        fill="none" 
                        stroke="currentColor" 
                        viewBox="0 0 24 24"
                    >
                        <path 
                            stroke-linecap="round" 
                            stroke-linejoin="round" 
                            stroke-width="2" 
                            d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                        />
                    </svg>
                    Volver al inicio
                </a>
            </div>
        </main>

        <Footer client:load />
        <Analytics client:load />
        <ErrorTracking 
            client:load 
            errorType="404"
            errorDetails={{
                title: pageMetadata.title
            }}
        />
    </div>
</Layout>

<script is:inline>
    // Definir dataLayer como una propiedad global
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
        'event': '404_error',
        'error_page': window.location.pathname,
        'from_page': document.referrer,
        'user_agent': navigator.userAgent,
        'timestamp': new Date().toISOString()
    });
</script>
    </div>
</Layout>